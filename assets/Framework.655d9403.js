import{d as C,e as T,a0 as V,c,X as o,R as n,af as l,o as a,a as t,V as g,W as f,F as B,a6 as D,L as I,S as J,Y as K,Q as M,U as v,f as O}from"./@vue.a8364f98.js";import{u as Z}from"./vuex.81148b15.js";import{u as ee,b as te}from"./vue-router.1482b702.js";const se={class:"layout"},oe=t("div",{class:"logo"},"MyBlog",-1),ne={class:"user-info"},le=t("span",null,"\u6B22\u8FCE\u56DE\u6765\uFF0C",-1),ae={class:"nick-name"},re=t("span",{class:"iconfont icon-close"},null,-1),ce={class:"avatar"},ie=["src"],ue={class:"menu-panel"},pe=["onClick"],de={class:"menu-title"},_e={class:"sub-menu"},ge={class:"progress-container"},he={class:"progress-panel"},me={key:0,class:"error"},fe=t("div",{class:"info"},"\u5177\u4F53\u9519\u8BEF\uFF0C\u8BF7\u67E5\u770B\u670D\u52A1\u5668\u65E5\u5FD7",-1),ve={key:1,class:"success"},we={key:2,class:"btn-panel"},Ue={__name:"Framework",setup(ke){const b=ee(),P=te(),q=Z(),{proxy:i}=O(),w=C([{title:"\u535A\u5BA2",icon:"icon-blog",open:!0,children:[{title:"\u535A\u5BA2\u7BA1\u7406",path:"/blog/list"},{title:"\u5206\u7C7B\u7BA1\u7406",path:"/blog/category"}]},{title:"\u4E13\u9898",icon:"icon-zhuanti",open:!0,children:[{title:"\u4E13\u9898\u7BA1\u7406",path:"/special/list"}]},{title:"\u8BBE\u7F6E",icon:"icon-settings",open:!0,children:[{title:"\u4E2A\u4EBA\u4FE1\u606F\u8BBE\u7F6E",path:"/settings/my"},{title:"\u535A\u5BA2\u6210\u5458",path:"/settings/user"},{title:"\u7CFB\u7EDF\u8BBE\u7F6E",path:"/settings/sysInfo",roleType:1}]},{title:"\u56DE\u6536\u7AD9",icon:"icon-delete",open:!0,children:[{title:"\u56DE\u6536\u7AD9",path:"/recovery/list"}]}]),h={getUserInfo:"getUserInfo",logout:"logout",createHtml:"createHtml",checkProgress:"checkProgress"},F=e=>{const r=w.value[e].open;w.value[e].open=!r},p=C({});(async()=>{let e=await i.Request({url:h.getUserInfo});!e||(p.value=e.data,p.value.avatar=i.globalInfo.imageUrl+e.data.avatar)})();const U=C(null);T(P,(e,r)=>{U.value=e.path},{immediate:!0,deep:!0});const H=()=>{b.push("../settings/my")},L=()=>{i.Confirm("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u9000\u51FA\u5417",async()=>{!await i.Request({url:h.logout})||b.push("/login")})};T(()=>q.state.userInfo,(e,r)=>{const m=i.globalInfo.imageUrl+e.avatar,y=e.nickName;p.value={avatar:m,nickName:y}},{immediate:!0,deep:!0});const S=[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#6f7ad3",percentage:60},{color:"#1989fa",percentage:80},{color:"#5cb87a",percentage:100}],d=V({title:"\u53D1\u5E03",buttons:[],show:!1}),s=V({progress:0});let k=null;const $=async()=>{d.show=!0,s.progress=0,s.status=void 0,await i.Request({url:h.createHtml})&&(x(),k=setInterval(()=>{x()},1e3))},x=async()=>{let e=await i.Request({url:h.checkProgress,showLoading:!1});!e||(e.data.result==0?(s.status="exception",s.errorMsg=e.data.errorMsg):s.progress=e.data.progress,s.result=e.data.result,(e.data.progress==100||e.data.result==0)&&k!=null&&clearInterval(k))};return(e,r)=>{const m=l("el-dropdown-item"),y=l("el-dropdown-menu"),z=l("el-dropdown"),E=l("el-header"),N=l("el-button"),Q=l("router-link"),W=l("el-aside"),X=l("router-view"),Y=l("el-main"),R=l("el-container"),j=l("el-progress"),A=l("Dialog");return a(),c("div",se,[o(R,null,{default:n(()=>[o(E,{class:"header"},{default:n(()=>[oe,t("div",ne,[le,o(z,{trigger:"click"},{dropdown:n(()=>[o(y,null,{default:n(()=>[o(m,{onClick:H},{default:n(()=>[g(" \u4E2A\u4EBA\u4FE1\u606F ")]),_:1}),o(m,{onClick:L},{default:n(()=>[g("\u9000\u51FA")]),_:1})]),_:1})]),default:n(()=>[t("span",ae,[g(f(p.value.nickName)+" ",1),re])]),_:1}),t("div",ce,[t("img",{src:p.value.avatar},null,8,ie)])])]),_:1}),o(R,{class:"container"},{default:n(()=>[o(W,{width:"200px",class:"left-aside"},{default:n(()=>[t("div",null,[o(N,{class:"post-btn",onClick:$},{default:n(()=>[g(" \u53D1\u5E03")]),_:1})]),t("div",ue,[t("ul",null,[(a(!0),c(B,null,D(w.value,(u,G)=>(a(),c("li",null,[t("span",{class:"menu-title-p",onClick:_=>F(G)},[t("span",{class:I(["iconfont",u.icon])},null,2),t("span",de,f(u.title),1),t("span",{class:I(["iconfont","open-close",u.open?"icon-open":"icon-close"])},null,2)],8,pe),J(t("ul",_e,[(a(!0),c(B,null,D(u.children,_=>(a(),c("li",null,[_.roleType==null||_.roleType==p.value.roleType?(a(),M(Q,{key:0,to:_.path,class:I(["sub-menu-item",U.value==_.path?"active":""])},{default:n(()=>[g(f(_.title),1)]),_:2},1032,["to","class"])):v("",!0)]))),256))],512),[[K,u.open]])]))),256))])])]),_:1}),o(Y,{class:"right-main"},{default:n(()=>[o(X)]),_:1})]),_:1})]),_:1}),o(A,{show:d.show,title:d.title,buttons:d.buttons,onClose:r[1]||(r[1]=u=>d.show=!1),"show-close":!1,showCancel:!1,width:"400px"},{default:n(()=>[t("div",ge,[t("div",he,[o(j,{type:"circle",percentage:s.progress,status:s.status,color:S},null,8,["percentage","status"])]),s.result==0?(a(),c("div",me,[t("div",null,"\u751F\u6210\u9875\u9762\u51FA\u9519\u4E86\uFF1A"+f(s.errorMsg),1),fe])):v("",!0),s.progress==100&&s.result==1?(a(),c("div",ve," \u53D1\u5E03\u6210\u529F ")):v("",!0),s.progress==100||s.result==0?(a(),c("div",we,[o(N,{class:"btn",type:"primary",onClick:r[0]||(r[0]=u=>d.show=!1)},{default:n(()=>[g("\u5173\u95ED")]),_:1})])):v("",!0)])]),_:1},8,["show","title","buttons"])])}}};export{Ue as default};
